<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mental Health Buddy</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Mental Health Buddy</h1>
            <p>Personalized responses based on your expressions, voice, and text</p>
        </header>

        <div class="tabs">
            <button class="tab-button active" data-tab="facial">Facial Analysis</button>
            <button class="tab-button" data-tab="voice">Voice Analysis</button>
            <button class="tab-button" data-tab="text">Text Analysis</button>
            <button class="tab-button" data-tab="combined">Combined Analysis</button>
            <button class="tab-button" data-tab="chat">Gen Z Chat</button>
            <button class="tab-button" data-tab="professionals">Find Help üè•</button>
        </div>

        <div class="tab-content">
            <!-- Facial Analysis Tab -->
            <div id="facial" class="tab-pane active">
                <h2>Facial Expression Analysis</h2>
                <div class="video-container">
                    <video id="video" width="640" height="480" autoplay></video>
                    <canvas id="canvas" width="640" height="480"></canvas>
                </div>
                <div class="controls">
                    <button id="startCamera">Start Camera</button>
                    <button id="captureExpression">Capture Expression</button>
                    <button id="stopCamera">Stop Camera</button>
                </div>
                <div id="facialResult" class="result"></div>
            </div>

            <!-- Voice Analysis Tab -->
            <div id="voice" class="tab-pane">
                <h2>Voice Modulation Analysis</h2>
                <div class="voice-container">
                    <div class="visualizer">
                        <canvas id="voiceVisualizer" width="600" height="200"></canvas>
                    </div>
                    <div class="controls">
                        <button id="startRecording">Start Recording</button>
                        <button id="stopRecording" disabled>Stop Recording</button>
                        <button id="playSample">Play Sample Audio</button>
                    </div>
                </div>
                <div id="voiceResult" class="result"></div>
            </div>

            <!-- Text Analysis Tab -->
            <div id="text" class="tab-pane">
                <h2>Text Pattern Analysis</h2>
                <div class="text-container">
                    <textarea id="textInput" placeholder="Type your thoughts here..."></textarea>
                    <div class="controls">
                        <button id="analyzeText">Analyze Text</button>
                        <button id="loadSampleText">Load Sample Text</button>
                    </div>
                </div>
                <div id="textResult" class="result"></div>
            </div>

            <!-- Combined Analysis Tab -->
            <div id="combined" class="tab-pane">
                <h2>Combined Analysis</h2>
                <p>Get a personalized response based on all three inputs</p>
                <div class="combined-container">
                    <div class="input-status">
                        <div id="facialStatus" class="status">Facial: Not analyzed</div>
                        <div id="voiceStatus" class="status">Voice: Not analyzed</div>
                        <div id="textStatus" class="status">Text: Not analyzed</div>
                    </div>
                    <button id="runCombinedAnalysis">Run Combined Analysis</button>
                </div>
                <div id="combinedResult" class="result"></div>
            </div>
            <div id="chat" class="tab-pane">
                <h2>Gen Z Chat Mode</h2>
                <div class="chat-container">
                    <div id="chatMessages" class="chat-messages">
                        <div class="message bot-message">
                            <div class="message-content">
                                <p>Hey bestie! üëã What's the vibe today? Spill the tea! ‚òï</p>
                            </div>
                            <div class="message-time">Just now</div>
                        </div>
                    </div>
                    <div class="chat-input-container">
                        <textarea id="chatInput" placeholder="Type your message... slay! üíÖ" rows="3"></textarea>
                        <button id="sendMessage">Send üí´</button>
                    </div>
                    <div class="chat-analysis">
                        <h3>Conversation Analysis</h3>
                        <div id="chatAnalysisResult" class="result"></div>
                    </div>
                </div>
            </div>
            <div id="professionals" class="tab-pane">
                <h2>Find Mental Health Professionals</h2>
                <p class="subtitle">Zomato-style matching with ratings, reviews, and proximity</p>
                
                <div class="finder-container">
                    <div class="finder-header">
                        <div id="professionalFilters" class="filters-container">
                            <!-- Filters will be rendered here -->
                        </div>
                        <button id="getEmotionRecommendations" class="recommendation-btn">
                            Get Recommendations Based on My Mood
                        </button>
                    </div>
                    
                    <div class="professionals-container">
                        <div id="professionalsList" class="professionals-list">
                            <!-- Professionals will be rendered here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>Mental Health Buddy - Your personalized emotional support companion</p>
        </footer>
    </div>

    <!-- Include TensorFlow.js and other libraries -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/blazeface"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/universal-sentence-encoder"></script>
    
    <!-- Include our custom scripts -->
    <script src="js/image_face_detector.js"></script>
    <script src="js/voice_analyser.js"></script>
    <script src="js/emotion_detector.js"></script>
    <script src="js/app.js"></script>
    <script src="js/chatbot.js"></script>
</body>
</html>